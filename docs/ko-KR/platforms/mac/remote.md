---
summary: "SSH를 통해 원격 OpenClaw 게이트웨이를 제어하는 macOS 앱 흐름"
read_when:
  - 원격 Mac 제어 설정 또는 디버깅 중일 때
title: "원격 제어"
---

# 원격 OpenClaw (macOS ⇄ 원격 호스트)

이 흐름을 통해 macOS 앱이 다른 호스트(데스크톱/서버)에서 실행 중인 OpenClaw 게이트웨이의 완전한 원격 제어 역할을 합니다. 이는 앱의 **원격 SSH 제어**(원격 실행) 기능입니다. 모든 기능(상태 확인, 음성 웨이크 포워딩, 웹 채팅)은 설정 → 일반에서 동일한 원격 SSH 설정을 재사용합니다.

## 모드

- **로컬(이 Mac)**: 모든 항목이 랩톱에서 실행됩니다. SSH가 포함되지 않습니다.
- **원격 SSH 제어(기본)**: OpenClaw 명령은 원격 호스트에서 실행됩니다. Mac 앱은 `-o BatchMode` 옵션과 선택한 키 ID/키, 로컬 포트 포워딩으로 SSH 연결을 엽니다.
- **원격 직접 연결(ws/wss)**: SSH 터널 없음. Mac 앱이 게이트웨이 URL에 직접 연결합니다(예: Tailscale Serve 또는 공개 HTTPS 리버스 프록시를 통해).

## 원격 전송 방식

원격 모드는 두 가지 전송 방식을 지원합니다:

- **SSH 터널**(기본): `ssh -N -L ...`을 사용하여 게이트웨이 포트를 localhost로 포워딩합니다. 터널이 루프백이므로 게이트웨이는 노드의 IP를 `127.0.0.1`로 표시합니다.
- **직접 연결(ws/wss)**: 게이트웨이 URL에 직접 연결합니다. 게이트웨이가 실제 클라이언트 IP를 표시합니다.

## 원격 호스트의 사전 준비

1. Node와 pnpm을 설치하고 OpenClaw CLI를 빌드/설치합니다(`pnpm install && pnpm build && pnpm link --global`).
2. 비대화형 셸에서 `openclaw`가 PATH에 있는지 확인합니다(필요시 `/usr/local/bin` 또는 `/opt/homebrew/bin`으로 심볼릭 링크 생성).
3. 키 인증으로 SSH를 엽니다. LAN 외부에서 안정적인 연결을 위해 **Tailscale** IP를 권장합니다.

## macOS 앱 설정

1. 설정 → 일반을 엽니다.
2. **OpenClaw 실행** 아래에서 **원격 SSH 제어**를 선택하고 다음을 설정합니다:
   - **전송 방식**: **SSH 터널** 또는 **직접 연결(ws/wss)**.
   - **SSH 대상**: `user@host`(선택적 `:port`).
     - 게이트웨이가 동일한 LAN에 있고 Bonjour를 광고하면 검색된 목록에서 선택하여 이 필드를 자동으로 채울 수 있습니다.
   - **게이트웨이 URL**(직접 연결만 해당): `wss://gateway.example.ts.net`(또는 로컬/LAN의 경우 `ws://...`).
   - **ID 파일**(고급): 키 경로.
   - **프로젝트 루트**(고급): 명령에 사용되는 원격 체크아웃 경로.
   - **CLI 경로**(고급): 실행 가능한 `openclaw` 엔트리포인트/바이너리의 선택적 경로(광고될 때 자동으로 채워짐).
3. **원격 테스트**를 클릭합니다. 성공은 원격 `openclaw status --json`이 올바르게 실행됨을 나타냅니다. 실패는 일반적으로 PATH/CLI 문제를 의미합니다. 종료 코드 127은 CLI를 원격에서 찾을 수 없음을 의미합니다.
4. 상태 확인 및 웹 채팅이 이제 이 SSH 터널을 통해 자동으로 실행됩니다.

## 웹 채팅

- **SSH 터널**: 웹 채팅이 포워딩된 WebSocket 제어 포트(기본 18789)를 통해 게이트웨이에 연결합니다.
- **직접 연결(ws/wss)**: 웹 채팅이 구성된 게이트웨이 URL에 직접 연결합니다.
- 별도의 WebChat HTTP 서버는 더 이상 없습니다.

## 권한

- 원격 호스트는 로컬과 동일한 TCC 승인(자동화, 접근성, 화면 기록, 마이크, 음성 인식, 알림)이 필요합니다. 해당 머신에서 온보딩을 실행하여 한 번 승인을 받으세요.
- 노드는 `node.list` / `node.describe`를 통해 권한 상태를 광고하므로 에이전트는 사용 가능한 항목을 알 수 있습니다.

## 보안 참고사항

- 원격 호스트에서 루프백 바인드를 선호하고 SSH 또는 Tailscale을 통해 연결합니다.
- 게이트웨이를 비루프백 인터페이스에 바인드하는 경우 토큰/비밀번호 인증을 요구합니다.
- 자세한 내용은 [보안](/gateway/security) 및 [Tailscale](/gateway/tailscale)을 참조하세요.

## WhatsApp 로그인 흐름(원격)

- **원격 호스트**에서 `openclaw channels login --verbose`를 실행합니다. 휴대폰의 WhatsApp으로 QR 코드를 스캔합니다.
- 인증이 만료되면 해당 호스트에서 로그인을 다시 실행합니다. 상태 확인이 연결 문제를 표시합니다.

## 문제 해결

- **종료 코드 127 / 찾을 수 없음**: 비로그인 셸에서 `openclaw`가 PATH에 없습니다. `/etc/paths`, 셸 rc 파일에 추가하거나 `/usr/local/bin`/`/opt/homebrew/bin`으로 심볼릭 링크를 생성합니다.
- **상태 확인 실패**: SSH 도달 가능성, PATH, Baileys 로그인 여부(`openclaw status --json`)를 확인합니다.
- **웹 채팅 멈춤**: 원격 호스트에서 게이트웨이가 실행 중인지, 포워딩된 포트가 게이트웨이 WS 포트와 일치하는지 확인합니다. UI에는 건강한 WS 연결이 필요합니다.
- **노드 IP가 127.0.0.1로 표시됨**: SSH 터널에서 예상된 동작입니다. 게이트웨이가 실제 클라이언트 IP를 보도록 하려면 **전송 방식**을 **직접 연결(ws/wss)**으로 전환합니다.
- **음성 웨이크**: 트리거 문구가 원격 모드에서 자동으로 포워딩됩니다. 별도의 포워더가 필요하지 않습니다.

## 알림 음소리

`openclaw` 및 `node.invoke`가 있는 스크립트에서 알림별로 음소리를 선택합니다. 예:

```bash
openclaw nodes notify --node <id> --title "Ping" --body "Remote gateway ready" --sound Glass
```

앱에는 더 이상 전역 "기본 음소리" 토글이 없습니다. 호출자는 요청별로 음소리를 선택합니다(또는 없음).
